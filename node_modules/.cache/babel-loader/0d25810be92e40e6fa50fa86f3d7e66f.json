{"ast":null,"code":"// Base reference date: 07/10/2024 is Monday\nexport const baseDate = new Date(2024, 9, 7); // October is month 9 (zero-indexed)\n\nexport const getDateForSelectedDay = day => {\n  const dayMap = {\n    \"Monday\": 0,\n    \"Tuesday\": 1,\n    \"Wednesday\": 2,\n    \"Thursday\": 3,\n    \"Friday\": 4\n  };\n  const offset = dayMap[day];\n  const selectedDate = new Date(baseDate);\n  selectedDate.setDate(baseDate.getDate() + offset); // Add the offset to 07/10/2024 (Monday)\n\n  return selectedDate;\n};\nexport const convertToDayDateTime = (isoString, num) => {\n  const date = new Date(isoString);\n  const dayOfWeek = date.toLocaleDateString('en-US', {\n    weekday: 'long'\n  });\n  const time = date.toLocaleTimeString('en-US', {\n    hour: '2-digit',\n    minute: '2-digit',\n    hour12: false\n  }); // Example: 10:30\n\n  if (num === 1) {\n    return time;\n  } else {\n    return {\n      dayOfWeek,\n      time\n    };\n  }\n\n  ;\n};\nexport const processFormDates = (day, startTime, endTime) => {\n  // Get the selected day and map it to a real date starting from 07/10/2024\n  const selectedDay = day;\n  const selectedDate = getDateForSelectedDay(selectedDay); // Parse the selected start and end times\n\n  const [startHour, startMinute] = startTime.split(':').map(Number);\n  const [endHour, endMinute] = endTime.split(':').map(Number); // Create the full start and end dates with the selected times\n\n  const startDateTime = new Date(selectedDate);\n  startDateTime.setHours(startHour + 8, startMinute, 0, 0);\n  const endDateTime = new Date(selectedDate);\n  endDateTime.setHours(endHour + 8, endMinute, 0, 0);\n  return {\n    startDateTime,\n    endDateTime\n  };\n};\nexport const convertToCSV = events => {\n  // Define the CSV headers\n  const headers = ['Day', 'Start Time', 'End Time', 'Module Name', 'Class', 'Class Type', 'Classroom']; // Define a helper function to get the numeric value of the day of the week\n\n  const getDayValue = day => {\n    const dayValues = {\n      Monday: 1,\n      Tuesday: 2,\n      Wednesday: 3,\n      Thursday: 4,\n      Friday: 5\n    };\n    return dayValues[day] || 6; // Default to 6 for any invalid day\n  }; // Map over the events array to convert each event to a CSV row\n\n\n  const rows = events.map(event => {\n    // Convert start and end time using the convertToDayDateTime function\n    const {\n      dayOfWeek,\n      time: startTime\n    } = convertToDayDateTime(event.start, 2); // Get day of the week and start time\n\n    const endTime = convertToDayDateTime(event.end, 1); // Get only the end time\n    // Return an array representing one row in the CSV\n\n    return [dayOfWeek, // Day of the week\n    startTime, // Start time\n    endTime, // End time\n    event.text, // Module name\n    event.class || 'N/A', // Class, default to 'N/A' if missing\n    event.classType || 'N/A', // Class type, default to 'N/A' if missing\n    event.classroom || 'N/A' // Classroom, default to 'N/A' if missing\n    ];\n  }); // Sort the rows based on the day of the week and then by start time\n\n  rows.sort((a, b) => {\n    const dayComparison = getDayValue(a[0]) - getDayValue(b[0]); // Compare by day of the week\n\n    if (dayComparison !== 0) {\n      return dayComparison; // If days are different, sort by day\n    } // If days are the same, compare by start time\n\n\n    return a[1].localeCompare(b[1]); // Use localeCompare for time comparison\n  }); // Combine the headers and rows into the final CSV content\n\n  const csvContent = [headers.join(','), // Join headers with commas to form the first row\n  ...rows.map(row => row.join(',')) // Map each row array to a CSV row and join with commas\n  ].join('\\n'); // Join rows with newlines to form the complete CSV file content\n\n  return csvContent; // Return the final CSV content\n}; // Function to trigger CSV file download\n\nexport const downloadCSV = (csvContent, filename) => {\n  const blob = new Blob([csvContent], {\n    type: 'text/csv;charset=utf-8;'\n  });\n  const url = URL.createObjectURL(blob);\n  const link = document.createElement('a');\n  link.href = url;\n  link.setAttribute('download', filename);\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n}; // Testing \n//     // Function to trigger CSV file download\n// export const downloadCSV = (csvContent, filename) => {\n//     const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n//     // Check if the iframe sandbox allows downloads\n//     if (window.parent === window) {\n//         // If no iframe, proceed with normal download\n//         const url = URL.createObjectURL(blob);\n//         const link = document.createElement('a');\n//         link.href = url;\n//         link.setAttribute('download', filename);\n//         document.body.appendChild(link);\n//         link.click();\n//         document.body.removeChild(link);\n//     } else {\n//         // If inside an iframe, try to communicate with parent window\n//         try {\n//             const data = { csvContent, filename, type: 'csvDownload' };\n//             window.parent.postMessage(data, '*');\n//         } catch (error) {\n//             console.error('Unable to trigger download within SAS VA:', error);\n//         }\n//     }\n// };","map":{"version":3,"names":["baseDate","Date","getDateForSelectedDay","day","dayMap","offset","selectedDate","setDate","getDate","convertToDayDateTime","isoString","num","date","dayOfWeek","toLocaleDateString","weekday","time","toLocaleTimeString","hour","minute","hour12","processFormDates","startTime","endTime","selectedDay","startHour","startMinute","split","map","Number","endHour","endMinute","startDateTime","setHours","endDateTime","convertToCSV","events","headers","getDayValue","dayValues","Monday","Tuesday","Wednesday","Thursday","Friday","rows","event","start","end","text","class","classType","classroom","sort","a","b","dayComparison","localeCompare","csvContent","join","row","downloadCSV","filename","blob","Blob","type","url","URL","createObjectURL","link","document","createElement","href","setAttribute","body","appendChild","click","removeChild"],"sources":["C:/Users/amyeoz/Downloads/timetable_schedule/src/calendar/days.js"],"sourcesContent":["// Base reference date: 07/10/2024 is Monday\r\nexport const baseDate = new Date(2024, 9, 7); // October is month 9 (zero-indexed)\r\n\r\nexport const getDateForSelectedDay = (day) => {\r\n    const dayMap = { \"Monday\": 0, \"Tuesday\": 1, \"Wednesday\": 2, \"Thursday\": 3, \"Friday\": 4 };\r\n    const offset = dayMap[day];\r\n    const selectedDate = new Date(baseDate);\r\n    selectedDate.setDate(baseDate.getDate() + offset); // Add the offset to 07/10/2024 (Monday)\r\n    return selectedDate;\r\n  };\r\n\r\nexport const convertToDayDateTime = (isoString, num) => {\r\n    const date = new Date(isoString);\r\n    const dayOfWeek = date.toLocaleDateString('en-US', { weekday: 'long' });\r\n    const time = date.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: false }); // Example: 10:30\r\n    if (num === 1){\r\n        return time;\r\n    } else {\r\n        return { dayOfWeek, time };\r\n    };\r\n}\r\n\r\nexport const processFormDates = (day, startTime, endTime) => {\r\n    // Get the selected day and map it to a real date starting from 07/10/2024\r\n    const selectedDay = day;\r\n    const selectedDate = getDateForSelectedDay(selectedDay);\r\n  \r\n    // Parse the selected start and end times\r\n    const [startHour, startMinute] = startTime.split(':').map(Number);\r\n    const [endHour, endMinute] = endTime.split(':').map(Number);\r\n  \r\n    // Create the full start and end dates with the selected times\r\n    const startDateTime = new Date(selectedDate);\r\n    startDateTime.setHours(startHour + 8, startMinute, 0, 0);\r\n  \r\n    const endDateTime = new Date(selectedDate);\r\n    endDateTime.setHours(endHour + 8, endMinute, 0, 0);\r\n\r\n    return {startDateTime, endDateTime};\r\n};\r\n\r\nexport const convertToCSV = (events) => {\r\n    // Define the CSV headers\r\n    const headers = ['Day', 'Start Time', 'End Time', 'Module Name', 'Class', 'Class Type', 'Classroom'];\r\n    \r\n    // Define a helper function to get the numeric value of the day of the week\r\n    const getDayValue = (day) => {\r\n        const dayValues = {\r\n            Monday: 1,\r\n            Tuesday: 2,\r\n            Wednesday: 3,\r\n            Thursday: 4,\r\n            Friday: 5,\r\n        };\r\n        return dayValues[day] || 6; // Default to 6 for any invalid day\r\n    };\r\n\r\n    // Map over the events array to convert each event to a CSV row\r\n    const rows = events.map(event => {\r\n        // Convert start and end time using the convertToDayDateTime function\r\n        const { dayOfWeek, time: startTime } = convertToDayDateTime(event.start, 2); // Get day of the week and start time\r\n        const endTime = convertToDayDateTime(event.end, 1); // Get only the end time\r\n\r\n        // Return an array representing one row in the CSV\r\n        return [\r\n            dayOfWeek,           // Day of the week\r\n            startTime,           // Start time\r\n            endTime,             // End time\r\n            event.text,          // Module name\r\n            event.class || 'N/A', // Class, default to 'N/A' if missing\r\n            event.classType || 'N/A', // Class type, default to 'N/A' if missing\r\n            event.classroom || 'N/A'  // Classroom, default to 'N/A' if missing\r\n        ];\r\n    });\r\n\r\n    // Sort the rows based on the day of the week and then by start time\r\n    rows.sort((a, b) => {\r\n        const dayComparison = getDayValue(a[0]) - getDayValue(b[0]); // Compare by day of the week\r\n        if (dayComparison !== 0) {\r\n            return dayComparison; // If days are different, sort by day\r\n        }\r\n        // If days are the same, compare by start time\r\n        return a[1].localeCompare(b[1]); // Use localeCompare for time comparison\r\n    });\r\n\r\n    // Combine the headers and rows into the final CSV content\r\n    const csvContent = [\r\n        headers.join(','),  // Join headers with commas to form the first row\r\n        ...rows.map(row => row.join(','))  // Map each row array to a CSV row and join with commas\r\n    ].join('\\n');  // Join rows with newlines to form the complete CSV file content\r\n  \r\n    return csvContent;  // Return the final CSV content\r\n};\r\n\r\n  \r\n  // Function to trigger CSV file download\r\n  export const downloadCSV = (csvContent, filename) => {\r\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n    const url = URL.createObjectURL(blob);\r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.setAttribute('download', filename);\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  };\r\n\r\n  // Testing \r\n//     // Function to trigger CSV file download\r\n// export const downloadCSV = (csvContent, filename) => {\r\n//     const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n    \r\n//     // Check if the iframe sandbox allows downloads\r\n//     if (window.parent === window) {\r\n//         // If no iframe, proceed with normal download\r\n//         const url = URL.createObjectURL(blob);\r\n//         const link = document.createElement('a');\r\n//         link.href = url;\r\n//         link.setAttribute('download', filename);\r\n//         document.body.appendChild(link);\r\n//         link.click();\r\n//         document.body.removeChild(link);\r\n//     } else {\r\n//         // If inside an iframe, try to communicate with parent window\r\n//         try {\r\n//             const data = { csvContent, filename, type: 'csvDownload' };\r\n//             window.parent.postMessage(data, '*');\r\n//         } catch (error) {\r\n//             console.error('Unable to trigger download within SAS VA:', error);\r\n//         }\r\n//     }\r\n// };\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}