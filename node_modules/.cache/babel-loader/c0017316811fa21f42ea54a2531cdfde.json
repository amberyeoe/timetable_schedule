{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\amyeoz\\\\Downloads\\\\timetable_schedule\\\\src\\\\calendar\\\\Calendar.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { DayPilotCalendar, DayPilot } from \"@daypilot/daypilot-lite-react\"; // Import DayPilot\n\nimport \"./Calendar.css\";\nimport { convertToDayDateTime, processFormDates, convertToCSV, downloadCSV, getDateForSelectedDay } from './days.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst styles = {\n  wrap: {\n    display: \"flex\"\n  },\n  main: {\n    flexGrow: \"1\"\n  }\n};\n\nconst Calendar = () => {\n  _s();\n\n  const [calendar, setCalendar] = useState(null);\n  const [events, setEvents] = useState([]);\n  const startDate = \"2024-10-07\"; // Fixed start date for the week (Monday)\n\n  const config = {\n    viewType: \"days\",\n    durationBarVisible: false,\n    days: 5,\n    // Show only Monday to Friday\n    timeRangeSelectedHandling: \"Enabled\",\n    businessBeginsHour: 7,\n    businessEndsHour: 20,\n    // Time range selection and event creation logic goes here...\n    events: events\n  }; // Helper function to read the CSV file and parse it into event objects\n\n  const parseCSVFile = file => {\n    const reader = new FileReader();\n\n    reader.onload = e => {\n      const csvContent = e.target.result;\n      console.log(\"CSV Content:\", csvContent); // Log the CSV content for debugging\n      // Split rows, remove any empty lines, and skip the first row (header)\n\n      const rows = csvContent.split(\"\\n\").filter(row => row.trim() !== \"\").slice(1); // Skip the first row\n\n      const parsedEvents = rows.map((row, index) => {\n        // Remove the trailing '\\r' from each row and split it into columns\n        const columns = row.replace(/\\r$/, \"\").split(\",\").map(col => col.trim()); // Check if we have the expected number of columns\n\n        if (columns.length < 8) {\n          console.error(`Row ${index + 2} has missing columns`, columns); // index + 2 to account for header\n\n          return null; // Skip this row\n        }\n\n        const [module, classInfo, classType, timeSlot, room, timeslotDay, timeslotStart, timeslotEnd] = columns; // Skip rows where timeslotStart or timeslotEnd is missing or invalid\n\n        if (!timeslotStart || !timeslotEnd || timeslotStart.trim() === \"\" || timeslotEnd.trim() === \"\") {\n          console.error(`Invalid timeslot data on row ${index + 2}:`, {\n            timeslotStart,\n            timeslotEnd\n          });\n          return null; // Skip this row\n        } // Process start and end times\n\n\n        const {\n          startDateTime,\n          endDateTime\n        } = processFormDates(timeslotDay, timeslotStart.trim(), timeslotEnd.trim());\n        console.log({\n          id: DayPilot.guid(),\n          start: new DayPilot.Date(startDateTime),\n          end: new DayPilot.Date(endDateTime),\n          text: module,\n          classroom: room,\n          class: classInfo,\n          classType: classType\n        });\n        return {\n          id: DayPilot.guid(),\n          start: new DayPilot.Date(startDateTime),\n          end: new DayPilot.Date(endDateTime),\n          text: module,\n          classroom: room,\n          class: classInfo,\n          classType: classType\n        };\n      }).filter(event => event !== null); // Filter out invalid rows\n\n      setEvents(parsedEvents); // Update the events state\n\n      console.log(\"Parsed Events:\", parsedEvents); // Log parsed events for debugging\n\n      calendar.update(); // Force the calendar to update\n    };\n\n    reader.readAsText(file); // Read the CSV file as text\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.buttonWrap,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        accept: \".csv\",\n        onChange: e => {\n          const file = e.target.files[0];\n\n          if (file) {\n            parseCSVFile(file);\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          const csvContent = convertToCSV(events); // Convert events to CSV format\n\n          downloadCSV(csvContent, 'schedule.csv'); // Trigger the download\n        },\n        children: \"Export to CSV\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.main,\n      children: /*#__PURE__*/_jsxDEV(DayPilotCalendar, { ...config,\n        startDate: startDate,\n        controlRef: setCalendar\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Calendar, \"zuRJhdDuPNajtmGWqS48/Wqf5uw=\");\n\n_c = Calendar;\nexport default Calendar;\n\nvar _c;\n\n$RefreshReg$(_c, \"Calendar\");","map":{"version":3,"names":["React","useEffect","useState","DayPilotCalendar","DayPilot","convertToDayDateTime","processFormDates","convertToCSV","downloadCSV","getDateForSelectedDay","styles","wrap","display","main","flexGrow","Calendar","calendar","setCalendar","events","setEvents","startDate","config","viewType","durationBarVisible","days","timeRangeSelectedHandling","businessBeginsHour","businessEndsHour","parseCSVFile","file","reader","FileReader","onload","e","csvContent","target","result","console","log","rows","split","filter","row","trim","slice","parsedEvents","map","index","columns","replace","col","length","error","module","classInfo","classType","timeSlot","room","timeslotDay","timeslotStart","timeslotEnd","startDateTime","endDateTime","id","guid","start","Date","end","text","classroom","class","event","update","readAsText","buttonWrap","files"],"sources":["C:/Users/amyeoz/Downloads/timetable_schedule/src/calendar/Calendar.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { DayPilotCalendar, DayPilot } from \"@daypilot/daypilot-lite-react\"; // Import DayPilot\nimport \"./Calendar.css\";\nimport { convertToDayDateTime, processFormDates, convertToCSV, downloadCSV, getDateForSelectedDay } from './days.js';\n\nconst styles = {\n  wrap: {\n    display: \"flex\"\n  },\n  main: {\n    flexGrow: \"1\"\n  }\n};\n\nconst Calendar = () => {\n  const [calendar, setCalendar] = useState(null);\n  const [events, setEvents] = useState([]);\n\n  const startDate = \"2024-10-07\"; // Fixed start date for the week (Monday)\n\n  const config = {\n    viewType: \"days\",\n    durationBarVisible: false,\n    days: 5, // Show only Monday to Friday\n    timeRangeSelectedHandling: \"Enabled\",\n    businessBeginsHour: 7,\n    businessEndsHour: 20,\n    // Time range selection and event creation logic goes here...\n    events: events\n  };\n\n  // Helper function to read the CSV file and parse it into event objects\n  const parseCSVFile = (file) => {\n    const reader = new FileReader();\n    reader.onload = (e) => {\n      const csvContent = e.target.result;\n      console.log(\"CSV Content:\", csvContent); // Log the CSV content for debugging\n  \n      // Split rows, remove any empty lines, and skip the first row (header)\n      const rows = csvContent.split(\"\\n\").filter(row => row.trim() !== \"\").slice(1); // Skip the first row\n  \n      const parsedEvents = rows.map((row, index) => {\n        // Remove the trailing '\\r' from each row and split it into columns\n        const columns = row.replace(/\\r$/, \"\").split(\",\").map(col => col.trim());\n  \n        // Check if we have the expected number of columns\n        if (columns.length < 8) {\n          console.error(`Row ${index + 2} has missing columns`, columns); // index + 2 to account for header\n          return null; // Skip this row\n        }\n  \n        const [module, classInfo, classType, timeSlot, room, timeslotDay, timeslotStart, timeslotEnd] = columns;\n  \n        // Skip rows where timeslotStart or timeslotEnd is missing or invalid\n        if (!timeslotStart || !timeslotEnd || timeslotStart.trim() === \"\" || timeslotEnd.trim() === \"\") {\n          console.error(`Invalid timeslot data on row ${index + 2}:`, { timeslotStart, timeslotEnd });\n          return null; // Skip this row\n        }\n  \n        // Process start and end times\n        const { startDateTime, endDateTime } = processFormDates(timeslotDay, timeslotStart.trim(), timeslotEnd.trim());\n        \n        console.log({\n          id: DayPilot.guid(),\n          start: new DayPilot.Date(startDateTime),\n          end: new DayPilot.Date(endDateTime),\n          text: module,\n          classroom: room,\n          class: classInfo,\n          classType: classType\n        });\n  \n        return {\n          id: DayPilot.guid(),\n          start: new DayPilot.Date(startDateTime),\n          end: new DayPilot.Date(endDateTime),\n          text: module,\n          classroom: room,\n          class: classInfo,\n          classType: classType\n        };\n        \n      }).filter(event => event !== null); // Filter out invalid rows\n  \n      setEvents(parsedEvents); // Update the events state\n      console.log(\"Parsed Events:\", parsedEvents); // Log parsed events for debugging\n  \n      calendar.update(); // Force the calendar to update\n    };\n  \n    reader.readAsText(file); // Read the CSV file as text\n  };\n  \n  \n  \n\n  return (\n    <div>\n      <div style={styles.buttonWrap}>\n\n        {/* Add the file input for CSV import */}\n        <input\n          type=\"file\"\n          accept=\".csv\"\n          onChange={(e) => {\n            const file = e.target.files[0];\n            if (file) {\n              parseCSVFile(file);\n            }\n          }}\n        />\n\n      <button onClick={() => {\n          const csvContent = convertToCSV(events);  // Convert events to CSV format\n          downloadCSV(csvContent, 'schedule.csv');  // Trigger the download\n        }}>\n          Export to CSV\n        </button>\n        {/* <button>Import from CSV</button> */}\n      </div>\n\n      <div style={styles.main}>\n        <DayPilotCalendar\n          {...config}\n          startDate={startDate}\n          controlRef={setCalendar}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default Calendar;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}