{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\amyeoz\\\\Downloads\\\\timetable_schedule\\\\src\\\\calendar\\\\Calendar.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { DayPilotCalendar, DayPilot } from \"@daypilot/daypilot-lite-react\"; // Import DayPilot\n\nimport \"./Calendar.css\";\nimport { convertToDayDateTime, processFormDates, convertToCSV, downloadCSV, getDateForSelectedDay } from './days.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst styles = {\n  wrap: {\n    display: \"flex\"\n  },\n  main: {\n    flexGrow: \"1\"\n  }\n};\n\nconst Calendar = () => {\n  _s();\n\n  const [calendar, setCalendar] = useState(null);\n  const [events, setEvents] = useState([]);\n  const startDate = \"2024-10-07\"; // Fixed start date for the week (Monday)\n\n  const config = {\n    viewType: \"days\",\n    durationBarVisible: false,\n    days: 5,\n    // Show only Monday to Friday\n    timeRangeSelectedHandling: \"Enabled\",\n    businessBeginsHour: 7,\n    businessEndsHour: 20,\n    // Time range selection and event creation logic goes here...\n    events: events\n  }; // Helper function to read the CSV file and parse it into event objects\n\n  const parseCSVFile = file => {\n    const reader = new FileReader();\n\n    reader.onload = e => {\n      const csvContent = e.target.result;\n      console.log(csvContent);\n      const rows = csvContent.split(\"\\n\").slice(1); // Skip the header row\n\n      const parsedEvents = rows.map(row => {\n        const [module, classInfo, classType, timeSlot, room, timeslotDay, timeslotStart, timeslotEnd] = row.split(\",\");\n        const startDateTime = processFormDates(timeslotDay, timeslotStart, timeslotEnd).startDateTime;\n        const endDateTime = processFormDates(timeslotDay, timeslotStart, timeslotEnd).endDateTime;\n        return {\n          id: DayPilot.guid(),\n          start: new DayPilot.Date(startDateTime),\n          end: new DayPilot.Date(endDateTime),\n          text: module,\n          classroom: room,\n          class: classInfo,\n          classType: classType\n        };\n      });\n      setEvents(parsedEvents); // Update the events state\n\n      calendar.update(); // Force the calendar to update\n    };\n\n    reader.readAsText(file); // Read the CSV file as text\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.buttonWrap,\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          const csvContent = convertToCSV(events); // Convert events to CSV format\n\n          downloadCSV(csvContent, 'schedule.csv'); // Trigger the download\n        },\n        children: \"Export to CSV\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        accept: \".csv\",\n        onChange: e => {\n          const file = e.target.files[0];\n\n          if (file) {\n            parseCSVFile(file);\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        children: \"Import from CSV\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.main,\n      children: /*#__PURE__*/_jsxDEV(DayPilotCalendar, { ...config,\n        startDate: startDate,\n        controlRef: setCalendar\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Calendar, \"zuRJhdDuPNajtmGWqS48/Wqf5uw=\");\n\n_c = Calendar;\nexport default Calendar;\n\nvar _c;\n\n$RefreshReg$(_c, \"Calendar\");","map":{"version":3,"names":["React","useEffect","useState","DayPilotCalendar","DayPilot","convertToDayDateTime","processFormDates","convertToCSV","downloadCSV","getDateForSelectedDay","styles","wrap","display","main","flexGrow","Calendar","calendar","setCalendar","events","setEvents","startDate","config","viewType","durationBarVisible","days","timeRangeSelectedHandling","businessBeginsHour","businessEndsHour","parseCSVFile","file","reader","FileReader","onload","e","csvContent","target","result","console","log","rows","split","slice","parsedEvents","map","row","module","classInfo","classType","timeSlot","room","timeslotDay","timeslotStart","timeslotEnd","startDateTime","endDateTime","id","guid","start","Date","end","text","classroom","class","update","readAsText","buttonWrap","files"],"sources":["C:/Users/amyeoz/Downloads/timetable_schedule/src/calendar/Calendar.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { DayPilotCalendar, DayPilot } from \"@daypilot/daypilot-lite-react\"; // Import DayPilot\nimport \"./Calendar.css\";\nimport { convertToDayDateTime, processFormDates, convertToCSV, downloadCSV, getDateForSelectedDay } from './days.js';\n\nconst styles = {\n  wrap: {\n    display: \"flex\"\n  },\n  main: {\n    flexGrow: \"1\"\n  }\n};\n\nconst Calendar = () => {\n  const [calendar, setCalendar] = useState(null);\n  const [events, setEvents] = useState([]);\n\n  const startDate = \"2024-10-07\"; // Fixed start date for the week (Monday)\n\n  const config = {\n    viewType: \"days\",\n    durationBarVisible: false,\n    days: 5, // Show only Monday to Friday\n    timeRangeSelectedHandling: \"Enabled\",\n    businessBeginsHour: 7,\n    businessEndsHour: 20,\n    // Time range selection and event creation logic goes here...\n    events: events\n  };\n\n  // Helper function to read the CSV file and parse it into event objects\n  const parseCSVFile = (file) => {\n    const reader = new FileReader();\n    reader.onload = (e) => {\n      const csvContent = e.target.result;\n      console.log(csvContent)\n      const rows = csvContent.split(\"\\n\").slice(1); // Skip the header row\n\n      const parsedEvents = rows.map(row => {\n        const [module, classInfo, classType, timeSlot, room, timeslotDay, timeslotStart, timeslotEnd] = row.split(\",\");\n        const startDateTime = processFormDates(timeslotDay, timeslotStart, timeslotEnd).startDateTime;\n        const endDateTime = processFormDates(timeslotDay, timeslotStart, timeslotEnd).endDateTime;\n\n        return {\n          id: DayPilot.guid(),\n          start: new DayPilot.Date(startDateTime),\n          end: new DayPilot.Date(endDateTime),\n          text: module,\n          classroom: room,\n          class: classInfo,\n          classType: classType\n        };\n      });\n\n      setEvents(parsedEvents); // Update the events state\n      calendar.update(); // Force the calendar to update\n    };\n\n    reader.readAsText(file); // Read the CSV file as text\n  };\n\n  return (\n    <div>\n      <div style={styles.buttonWrap}>\n        <button onClick={() => {\n          const csvContent = convertToCSV(events);  // Convert events to CSV format\n          downloadCSV(csvContent, 'schedule.csv');  // Trigger the download\n        }}>\n          Export to CSV\n        </button>\n\n        {/* Add the file input for CSV import */}\n        <input\n          type=\"file\"\n          accept=\".csv\"\n          onChange={(e) => {\n            const file = e.target.files[0];\n            if (file) {\n              parseCSVFile(file);\n            }\n          }}\n        />\n        <button>Import from CSV</button>\n      </div>\n\n      <div style={styles.main}>\n        <DayPilotCalendar\n          {...config}\n          startDate={startDate}\n          controlRef={setCalendar}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default Calendar;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}